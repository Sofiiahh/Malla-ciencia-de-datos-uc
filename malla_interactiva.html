<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Malla Curricular Interactiva</title>
<style>
  body { font-family: Arial, sans-serif; background: #f5f5f5; }
  table { border-collapse: collapse; width: 100%; margin-bottom: 20px; table-layout: fixed; }
  th, td { border: 1px solid #999; padding: 6px; text-align: center; vertical-align: middle; cursor: pointer; transition: all 0.2s; }
  th { background-color: #444; color: #fff; }
  td div { line-height: 1.2; }
  .aprobado { text-decoration: line-through; color: white; }
  .desbloqueado { font-weight: bold; }
  .bloqueado { opacity: 0.6; }
  .extra { background-color: #F8C1D5; }
</style>
</head>
<body>

<h1>Malla Curricular Interactiva</h1>

<table>
  <tr>
    <th>1er Semestre</th>
    <th>2do Semestre</th>
    <th>3er Semestre</th>
    <th>4to Semestre</th>
    <th>5to Semestre</th>
    <th>6to Semestre</th>
    <th>7mo Semestre</th>
    <th>8vo Semestre</th>
  </tr>

  <!-- Fila de cursos -->
  <tr id="fila1">
    <td id="FIL2001"></td>
    <td id="IIC2233"></td>
    <td id="IMT2220"></td>
    <td id="EYP1025"></td>
    <td id="EYP2114"></td>
    <td id="EYP2101"></td>
    <td id="EYP2111"></td>
    <td id="IMT2270"></td>
  </tr>
  <tr id="fila2">
    <td id="MAT1107"></td>
    <td id="MAT1610"></td>
    <td id="IMT2230"></td>
    <td id="IC2133"></td>
    <td id="IIC2613"></td>
    <td id="EYP2301"></td>
    <td id="EYP2801"></td>
    <td></td>
  </tr>
  <tr id="fila3">
    <td id="MAT1207"></td>
    <td id="IMT2210"></td>
    <td id="ETI195"></td>
    <td id="IC2413"></td>
    <td id="LIC2440"></td>
    <td id="C2026"></td>
    <td id="IMT2260"></td>
    <td></td>
  </tr>
  <tr id="fila4">
    <td id="MAT0007"></td>
    <td id="IMT2200"></td>
    <td id="IIC1253"></td>
    <td id="IMT2250"></td>
    <td></td>
    <td id="IIC2433"></td>
    <td></td>
    <td id="OTRO"></td>
  </tr>

  <!-- Fila extra para OFG / cursos adicionales -->
  <tr>
    <td colspan="8">
      <input type="text" id="cursosExtra" placeholder="Escribe cursos OFG o extra aquí" style="width: 100%; padding: 6px;">
    </td>
  </tr>
</table>

<script>
const cursos = {
  "FIL2001": { nombre: "Filosofía", aprobado: false, esExtra:true },
  "IC1103": { nombre: "Introducción a la Programación", aprobado: false },
  "MAT1107": { nombre: "Introducción al Cálculo", aprobado: false },
  "MAT1207": { nombre: "Introducción al Álgebra y Geometría", aprobado: false },
  "MAT0007": { nombre: "Taller de Matemáticas para Estadística", aprobado: false },
  "IIC2233": { nombre: "Programación Avanzada", prereq: ["IC1103"], aprobado: false },
  "MAT1610": { nombre: "Cálculo I", prereq: ["MAT1107"], aprobado: false },
  "IMT2210": { nombre: "Álgebra Lineal", prereq: ["IC1103","MAT1107"], aprobado: false },
  "IMT2200": { nombre: "Introducción a Ciencia de Datos", prereq: ["IC1103"], aprobado: false },
  "IMT2220": { nombre: "Cálculo para Ciencia de Datos", prereq: ["MAT1610"], aprobado: false },
  "IMT2230": { nombre: "Álgebra Lineal Avanzada", prereq: ["MAT1610","IMT2210"], aprobado: false },
  "ETI195": { nombre: "Ética", prereq: ["IIC2233"], aprobado: false },
  "IC2133": { nombre: "Estructuras de Datos", prereq: ["IIC2233"], aprobado: false },
  "IC2413": { nombre: "Bases de Datos", prereq: ["IIC2233"], aprobado: false },
  "IMT2250": { nombre: "Optimización", prereq: ["IMT2220"], aprobado: false },
  "EYP1025": { nombre: "Modelos Probabilísticos", prereq: ["IMT2220"], aprobado: false },
  "EYP2114": { nombre: "Inferencia Estadística", prereq: ["EYP1025"], aprobado: false },
  "IIC2613": { nombre: "Inteligencia Artificial", prereq: ["EYP1025"], aprobado: false },
  "LIC2440": { nombre: "Procesamiento Masivo", prereq: ["IC2413"], aprobado: false },
  "EYP2101": { nombre: "Procesos Estocásticos", prereq: ["EYP2114"], aprobado: false },
  "EYP2301": { nombre: "Análisis de Regresión", prereq: ["EYP2114"], aprobado: false },
  "C2026": { nombre: "Visualización de Información", prereq: ["IC1103"], aprobado: false },
  "IIC2433": { nombre: "Minería de Datos", prereq: ["IC1103","EYP1025"], aprobado: false },
  "EYP2111": { nombre: "Simulación", prereq: ["EYP2101"], aprobado: false },
  "EYP2801": { nombre: "Métodos Bayesianos", prereq: ["EYP2114"], aprobado: false },
  "IMT2260": { nombre: "Aprendizaje Automático", prereq: ["EYP2114","LIC2440"], aprobado: false },
  "IMT2270": { nombre: "Proyecto de Graduación", prereq: ["IMT2260"], aprobado: false },
  "OTRO": { nombre: "Otro", aprobado:false, esExtra:true }
};

const colores = ["#F1948A","#5DADE2","#F4D03F","#58D68D","#AF7AC5","#F7DC6F","#45B39D","#DC7633"];
let usados = [];

function getColor() {
  if (usados.length === colores.length) usados = [];
  let disponibles = colores.filter(c => !usados.includes(c));
  let color = disponibles[Math.floor(Math.random()*disponibles.length)];
  usados.push(color);
  return color;
}

function actualizarMalla() {
  for (const codigo in cursos) {
    const curso = cursos[codigo];
    const elemento = document.getElementById(codigo);
    if (!elemento) continue;

    elemento.innerHTML = `<div>${curso.nombre}</div><div style="font-weight:bold; margin-top:4px;">${codigo}</div>`;

    if (curso.aprobado) {
      elemento.style.backgroundColor = getColor();
      elemento.className = "aprobado";
    } else if (curso.esExtra) {
      elemento.className = "extra";
      elemento.style.backgroundColor = "";
    } else {
      elemento.className = "desbloqueado";
      elemento.style.backgroundColor = "";
    }
  }
}

function toggleAprobado(codigo) {
  cursos[codigo].aprobado = !cursos[codigo].aprobado;
  actualizarMalla();
}

document.addEventListener("DOMContentLoaded", () => {
  for (const codigo in cursos) {
    const elemento = document.getElementById(codigo);
    if (elemento) {
      elemento.addEventListener("click", () => toggleAprobado(codigo));
    }
  }
  actualizarMalla();
});
</script>

</body>
</html>
