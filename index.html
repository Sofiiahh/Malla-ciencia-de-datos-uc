<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Malla Interactiva</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f8f8f8;
      margin: 0;
      padding: 20px;
      color: #222;
    }

    h1 {
      text-align: center;
      margin-bottom: 25px;
      font-size: 28px;
      font-weight: bold;
    }

    .curso {
      padding: 10px;
      margin: 8px 0;
      border-radius: 6px;
      font-size: 15px;
      cursor: pointer;
      border: 1px solid #ccc;
    }

    .aprobado {
      background: #b6ffb6;
      text-decoration: line-through;
    }

    .bloqueado {
      background: #ffb6b6;
      cursor: not-allowed;
    }

    .desbloqueado {
      background: #b6d4ff;
    }

    #plan-container {
      margin-top: 40px;
      padding: 20px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    .semestre-box {
      padding: 10px;
      margin-bottom: 15px;
      border-left: 5px solid #444;
      background: #fafafa;
      border-radius: 5px;
    }

    .ofg {
      background: #ffe6b6;
    }
  </style>
</head>
<body>
  <h1>Malla Interactiva</h1>

  <div id="malla"></div>

  <div id="plan-container"></div>

  <script>
    const cursos = {
      "IC1103": { nombre: "Introducción a la Programación", req: [] },
      "MAT1107": { nombre: "Introducción al Cálculo", req: [] },
      "MAT1207": { nombre: "Álgebra y Geometría", req: [] },
      "MAT0007": { nombre: "Taller de Matemáticas", req: [] },

      "IIC2233": { nombre: "Programación Avanzada", req: ["IC1103"] },
      "MAT1610": { nombre: "Cálculo I", req: ["MAT1107"] },
      "IMT2210": { nombre: "Álgebra Lineal CD", req: ["IC1103", "MAT1107", "MAT1207"] },
      "IMT2200": { nombre: "Intro a Ciencia de Datos", req: ["IC1103", "MAT1207"] },

      "IMT2220": { nombre: "Cálculo CD", req: ["MAT1610"] },
      "IMT2230": { nombre: "Álgebra Avanzada", req: ["MAT1610", "IMT2210"] },
      "ETI195": { nombre: "Ética", req: ["IIC2233", "IMT2200"] },
      "IIC1253": { nombre: "Matemáticas Discretas", req: ["IMT2210"] },

      "EYP1025": { nombre: "Modelos Probabilísticos", req: ["IMT2220", "IMT2230"] },
      "IC2133": { nombre: "Estructuras de Datos", req: ["IIC2233", "IIC1253"] },
      "IC2413": { nombre: "Bases de Datos", req: ["IIC2233", "IIC1253"] },
      "IMT2250": { nombre: "Optimización CD", req: ["IMT2220", "IMT2210"] },

      "EYP2114": { nombre: "Inferencia", req: ["EYP1025"] },
      "IIC2613": { nombre: "Inteligencia Artificial", req: ["EYP1025", "IIC2233"] },
      "LIC2440": { nombre: "Procesamiento de Datos Masivos", req: ["IC2413", "IC2133"] },

      "EYP2101": { nombre: "Procesos Estocásticos", req: ["EYP2114"] },
      "EYP2301": { nombre: "Regresión", req: ["EYP2114"] },
      "C2026": { nombre: "Visualización", req: ["IC1103"] },
      "IIC2433": { nombre: "Minería de Datos", req: ["IC1103", "EYP1025", "IMT2210"] },

      "EYP2111": { nombre: "Simulación", req: ["EYP2101"] },
      "EYP2801": { nombre: "Métodos Bayesianos", req: ["EYP2114"] },
      "IMT2260": { nombre: "Teoría del Aprendizaje", req: ["IMT2250", "EYP1025"] },

      "IMT2270": { nombre: "Proyecto de Graduación", req: ["EYP2801", "IMT2260", "IMT2250", "ETI195"] }
    };

    const ofgCount = 4;

    function crearMalla() {
      const cont = document.getElementById("malla");
      cont.innerHTML = "";

      Object.keys(cursos).forEach(cod => {
        const div = document.createElement("div");
        div.className = "curso bloqueado";
        div.id = cod;
        div.textContent = `${cod} – ${cursos[cod].nombre}`;
        div.onclick = () => toggle(cod);
        cont.appendChild(div);
      });

      for (let i = 0; i < ofgCount; i++) {
        const div = document.createElement("div");
        div.className = "curso ofg desbloqueado";
        div.textContent = `OFG ${i + 1}`;
        cont.appendChild(div);
      }
    }

    function toggle(cod) {
      const div = document.getElementById(cod);
      if (div.classList.contains("aprobado")) return;
      if (div.classList.contains("bloqueado")) return;

      div.classList.add("aprobado");
      actualizarBloqueos();
    }

    function actualizarBloqueos() {
      Object.keys(cursos).forEach(cod => {
        const curso = cursos[cod];
        const div = document.getElementById(cod);
        const reqs = curso.req;
        const aprobados = [...document.querySelectorAll(".aprobado")].map(d => d.id);

        const cumple = reqs.every(r => aprobados.includes(r));

        if (div.classList.contains("aprobado")) return;

        if (cumple) div.className = "curso desbloqueado";
        else div.className = "curso bloqueado";
      });
    }

    crearMalla();
  </script>
</body>
</html><!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Malla Interactiva — Ciencia de Datos</title>
<style>
body{font-family:Arial, sans-serif;background:#f9f9f9;margin:0;padding:16px;color:#222}
h1{text-align:center;font-size:26px;margin-bottom:12px}
.controls{display:flex;gap:12px;flex-wrap:wrap;justify-content:center;margin-bottom:18px}
select{padding:6px;font-size:15px}
.legend{display:flex;gap:8px;justify-content:center;margin-bottom:12px}
.pill{padding:6px 10px;border-radius:12px;font-size:13px;color:#fff;font-weight:bold}
.pill.aprobado{background:#2EC4B6}
.pill.desbloqueado{background:#FF6FAF}
.pill.bloqueado{background:#777}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:14px}
.sem-box{padding:12px;border-radius:12px;box-shadow:0 6px 16px rgba(0,0,0,0.08)}
.sem-box h3{margin:0 0 6px;font-size:18px;font-weight:bold}
.course{background:#fff;border-radius:8px;padding:8px;margin-bottom:6px;cursor:pointer;border:2px solid transparent}
.course .code{font-weight:bold;font-size:13px}
.course .name{font-size:14px}
.aprobado{background:#2EC4B6;color:white;text-decoration:line-through;border-color:#1aa093}
.desbloqueado{background:#FFB3D7;border-color:#ff6faf}
.bloqueado{background:#ddd;color:#666}
.plan{margin-top:20px;background:#fff;padding:12px;border-radius:10px}
.plan h2{text-align:center}
.plan-sem{margin-bottom:12px;padding:8px;border-left:4px solid #888;background:#fafafa;border-radius:6px}
.action{margin-top:18px;background:#FFF4D2;padding:12px;border-radius:8px;font-size:15px}
</style>
</head>

<body>
<h1>Malla Interactiva — Ciencia de Datos</h1>

<div class="controls">
<label>Máx. ramos por semestre:
<select id="maxPerSem">
<option value="4">4</option>
<option value="5" selected>5</option>
<option value="6">6</option>
</select>
</label>

<label>Semestre actual:
<select id="semActual"></select>
</label>
</div>

<div class="legend">
<span class="pill aprobado">Aprobado</span>
<span class="pill desbloqueado">Desbloqueado</span>
<span class="pill bloqueado">Bloqueado</span>
</div>

<div id="grid" class="grid"></div>

<div id="planes" class="plan"></div>

<script>
const R={
IC1103:{n:'Introducción a la Programación',s:1,pr:[]},
MAT1107:{n:'Introducción al Cálculo',s:1,pr:[]},
MAT1207:{n:'Introducción al Álgebra y Geometría',s:1,pr:[]},
MAT0007:{n:'Taller de Matemáticas',s:1,pr:[]},
OFG1:{n:'OFG 1',s:1,pr:[]},
IIC2233:{n:'Programación Avanzada',s:2,pr:['IC1103']},
MAT1610:{n:'Cálculo I',s:2,pr:['MAT1107']},
IMT2210:{n:'Álgebra Lineal para Ciencia de Datos',s:2,pr:['IC1103','MAT1107','MAT1207']},
IMT2200:{n:'Introducción a Ciencia de Datos',s:2,pr:['IC1103','MAT1207']},
OFG2:{n:'OFG 2',s:2,pr:[]},
IMT2220:{n:'Cálculo para Ciencia de Datos',s:3,pr:['MAT1610']},
IMT2230:{n:'Álgebra Lineal Avanzada y Modelamiento',s:3,pr:['MAT1610','IMT2210']},
ETI195:{n:'Ética para Ciencia de Datos y Estadística',s:3,pr:['IIC2233','IMT2200']},
IIC1253:{n:'Matemáticas Discretas',s:3,pr:['IMT2210']},
OFG3:{n:'OFG 3',s:3,pr:[]},
EYP1025:{n:'Modelos Probabilísticos',s:4,pr:['IMT2220','IMT2230']},
IC2133:{n:'Estructuras de Datos y Algoritmos',s:4,pr:['IIC2233','IIC1253']},
IC2413:{n:'Bases de Datos',s:4,pr:['IIC2233','IIC1253']},
IMT2250:{n:'Optimización para Ciencia de Datos',s:4,pr:['IMT2220','IMT2210']},
OFG4:{n:'OFG 4',s:4,pr:[]},
EYP2114:{n:'Inferencia Estadística',s:5,pr:['EYP1025']},
IIC2613:{n:'Inteligencia Artificial',s:5,pr:['EYP1025','IIC2233']},
LIC2440:{n:'Procesamiento de Datos Masivos',s:5,pr:['IC2413','IC2133']},
OFG5:{n:'OFG 5',s:5,pr:[]},
EYP2101:{n:'Procesos Estocásticos Aplicados',s:6,pr:['EYP2114']},
EYP2301:{n:'Análisis de Regresión',s:6,pr:['EYP2114']},
C2026:{n:'Visualización de la Información',s:6,pr:['IC1103']},
IIC2433:{n:'Minería de Datos',s:6,pr:['IC1103','EYP1025','IMT2210']},
OFG6:{n:'OFG 6',s:6,pr:[]},
EYP2111:{n:'Simulación',s:7,pr:['EYP2101']},
EYP2801:{n:'Métodos Bayesianos',s:7,pr:['EYP2114']},
IMT2260:{n:'Teoría de Aprendizaje Automático',s:7,pr:['IMT2250','EYP1025']},
OFG7:{n:'OFG 7',s:7,pr:[]},
IMT2270:{n:'Proyecto de Graduación',s:8,pr:['EYP2801','IMT2260','IMT2250','ETI195']},
OFG8:{n:'OFG 8',s:8,pr:[]}
};

let aprob=[];

function canTake(c){return R[c].pr.every(p=>aprob.includes(p));}

function buildPlan(max){
let plan={}; let done=[...aprob];
for(let s=1;s<=8;s++){
plan[s]=[];
let courses=Object.keys(R).filter(c=>R[c].s===s && !done.includes(c) && canTake(c));
for(let c of courses.slice(0,max)){plan[s].push(c);done.push(c);} }
return plan;
}

function renderGrid(){
const g=document.getElementById('grid');
g.innerHTML='';
for(let s=1;s<=8;s++){
let box=document.createElement('div');box.className='sem-box';box.style.background=`hsl(${s*40},70%,88%)`;
box.innerHTML=`<h3>Semestre ${s}</h3>`;
Object.keys(R).filter(c=>R[c].s===s).forEach(c=>{
let st= aprob.includes(c)?'aprobado': canTake(c)?'desbloqueado':'bloqueado';
let b=document.createElement('div');
b.className=`course ${st}`;
b.onclick=()=>{toggle(c)};
b.innerHTML=`<div class='code'>${c}</div><div class='name'>${R[c].n}</div>`;
box.appendChild(b);
});
g.appendChild(box);
}
}

function toggle(c){
if(aprob.includes(c)) aprob=aprob.filter(x=>x!==c);
else aprob.push(c);
renderAll();
}

function renderPlans(){
let max=Number(document.getElementById('maxPerSem').value);
let semAct=Number(document.getElementById('semActual').value);
let p=buildPlan(max);
const div=document.getElementById('planes');
div.innerHTML='<h2>Planes Recomendados</h2>';
Object.keys(p).forEach(s=>{
if(p[s].length>0){
let d=document.createElement('div');d.className='plan-sem';
d.innerHTML=`<strong>Semestre ${s}</strong><br>`+p[s].map(c=>`${c} — ${R[c].n}`).join('<br>');
div.appendChild(d);
}
});
let act=document.createElement('div');act.className='action';
act.innerHTML=`<h3>Plan de acción — Semestre ${semAct}</h3>`;
if(p[semAct].length===0) act.innerHTML+="No hay ramos desbloqueados para este semestre.";
else act.innerHTML+=p[semAct].map(c=>`<li>${c} — ${R[c].n}</li>`).join('');
div.appendChild(act);
}

function renderAll(){renderGrid();renderPlans();}

window.onload=()=>{
let sel=document.getElementById('semActual');
for(let i=1;i<=8;i++){
let o=document.createElement('option');o.value=i;o.textContent=i;sel.appendChild(o);
}
sel.value=1;
renderAll();
};
</script>
</body>
</html>
