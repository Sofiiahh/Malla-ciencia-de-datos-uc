<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Malla Curricular Interactiva</title>

<style>
  body {
    font-family: Arial, sans-serif;
    background: #f5f5f5;
    margin: 0;
  }
  h1 { text-align: center; margin: 20px 0; }
  table {
    width: 100%;
    border-collapse: collapse;
    table-layout: fixed;
    margin-bottom: 20px;
  }
  th, td {
    border: 1px solid #999;
    padding: 6px;
    text-align: center;
    cursor: pointer;
    word-wrap: break-word;
    min-width: 70px;
  }
  th {
    background-color: #444;
    color: #fff;
  }
  .curso-nombre { font-size: 13px; }
  .curso-sigla { font-size: 11px; color: #222; }

  /* Estados */
  td.bloqueado {
    background: #cfcfcf;
    color: #666;
    cursor: not-allowed;
    opacity: 0.7;
  }
  td.desbloqueado {
    background: #cfe9ff; 
    color: #002a73;
    font-weight: bold;
  }
  td.aprobado {
    background: #3eb96d;
    color: #fff;
    text-decoration: line-through;
    font-weight: bold;
  }

  /* OFG y extras */
  td.extra {
    background: #f8d7eb;
  }
</style>
</head>
<body>

<h1>Malla Curricular Interactiva</h1>

<table>
  <tr>
    <th>1°</th><th>2°</th><th>3°</th><th>4°</th>
    <th>5°</th><th>6°</th><th>7°</th><th>8°</th>
  </tr>

  <tr>
    <td id="IC1103"></td><td id="IIC2233"></td><td id="IMT2220"></td><td id="EYP1025"></td>
    <td id="EYP2114"></td><td id="EYP2101"></td><td id="EYP2111"></td><td id="IMT2270"></td>
  </tr>
  <tr>
    <td id="MAT1107"></td><td id="MAT1610"></td><td id="IMT2230"></td><td id="IC2133"></td>
    <td id="IIC2613"></td><td id="EYP2301"></td><td id="EYP2801"></td><td></td>
  </tr>
  <tr>
    <td id="MAT1207"></td><td id="IMT2210"></td><td id="ETI195"></td><td id="IC2413"></td>
    <td id="LIC2440"></td><td id="C2026"></td><td id="IMT2260"></td><td></td>
  </tr>
  <tr>
    <td id="MAT0007"></td><td id="IMT2200"></td><td id="IIC1253"></td><td id="IMT2250"></td>
    <td id="OTRO"></td><td id="IIC2433"></td><td id="OPR_MINOR_7"></td><td id="OPR_MINOR_8"></td>
  </tr>

  <!-- ✅ OFG TACHEABLES -->
  <tr>
    <td id="OFG1" class="extra"></td>
    <td id="OFG2" class="extra"></td>
    <td id="OFG3" class="extra"></td>
    <td id="OFG4" class="extra"></td>
    <td id="OFG5" class="extra"></td>
    <td id="OFG6" class="extra"></td>
    <td id="OFG7" class="extra"></td>
    <td id="OFG8" class="extra"></td>
  </tr>

  <!-- Cursos extra -->
  <tr>
    <td class="extra" id="extra1"></td><td class="extra" id="extra2"></td>
    <td class="extra" id="extra3"></td><td class="extra" id="extra4"></td>
    <td class="extra" id="extra5"></td><td class="extra" id="extra6"></td>
    <td class="extra" id="extra7"></td><td class="extra" id="extra8"></td>
  </tr>
</table>

<script>
// ✅ CURSOS: nombres reales + siglas + prerrequisitos
const cursos = {
  "IC1103":{nombre:"Introducción a la Programación", sig:"IC1103", prereq:[]},
  "MAT1107":{nombre:"Introducción al Cálculo", sig:"MAT1107", prereq:[]},
  "MAT1207":{nombre:"Álgebra y Geometría", sig:"MAT1207", prereq:[]},
  "MAT0007":{nombre:"Taller de Matemáticas", sig:"MAT0007", prereq:[]},

  "IIC2233":{nombre:"Programación Avanzada", sig:"IIC2233", prereq:["IC1103"]},
  "MAT1610":{nombre:"Cálculo I", sig:"MAT1610", prereq:["MAT1107"]},
  "IMT2210":{nombre:"Álgebra Lineal CD", sig:"IMT2210", prereq:["MAT1207"]},
  "IMT2200":{nombre:"Intro Ciencia de Datos", sig:"IMT2200", prereq:["IC1103"]},

  "IMT2220":{nombre:"Cálculo CD", sig:"IMT2220", prereq:["MAT1610"]},
  "IMT2230":{nombre:"Álgebra Avanzada", sig:"IMT2230", prereq:["IMT2210","MAT1610"]},
  "ETI195":{nombre:"Ética Ciencia de Datos", sig:"ETI195", prereq:["IMT2200"]},
  "IIC1253":{nombre:"Matemáticas Discretas", sig:"IIC1253", prereq:["IMT2210"]},

  "EYP1025":{nombre:"Probabilidades", sig:"EYP1025", prereq:["IMT2220"]},
  "IC2133":{nombre:"Estructuras de Datos", sig:"IC2133", prereq:["IIC2233"]},
  "IC2413":{nombre:"Base de Datos", sig:"IC2413", prereq:["IIC2233"]},
  "IMT2250":{nombre:"Optimización", sig:"IMT2250", prereq:["IMT2210"]},

  "EYP2114":{nombre:"Inferencia Estadística", sig:"EYP2114", prereq:["EYP1025"]},
  "IIC2613":{nombre:"Inteligencia Artificial", sig:"IIC2613", prereq:["IIC2133"]},
  "LIC2440":{nombre:"Big Data", sig:"LIC2440", prereq:["IC2413"]},
  "OTRO":{nombre:"OPR o Minor", sig:"OTR5", prereq:[]},

  "EYP2101":{nombre:"Procesos Estocásticos", sig:"EYP2101", prereq:["EYP2114"]},
  "EYP2301":{nombre:"Regresión", sig:"EYP2301", prereq:["EYP2114"]},
  "C2026":{nombre:"Visualización Info", sig:"C2026", prereq:[]},
  "IIC2433":{nombre:"Minería de Datos", sig:"IIC2433", prereq:["IC2413"]},

  "EYP2111":{nombre:"Simulación", sig:"EYP2111", prereq:["EYP2101"]},
  "EYP2801":{nombre:"Bayesianos", sig:"EYP2801", prereq:["EYP2114"]},
  "IMT2260":{nombre:"Aprendizaje Automático", sig:"IMT2260", prereq:["IMT2250"]},
  "OPR_MINOR_7":{nombre:"OPR/Minor", sig:"OPR7", prereq:[]},

  "IMT2270":{nombre:"Proyecto de Graduación", sig:"IMT2270", prereq:["IMT2260","EYP2801"]},
  "OPR_MINOR_8":{nombre:"OPR/Minor", sig:"OPR8", prereq:[]},
};

// ✅ OFG también son cursos tacheables
for(let i=1;i<=8;i++){
  cursos["OFG"+i]={nombre:"OFG / Optativo UC", sig:"OFG", prereq:[]};
}

Object.values(cursos).forEach(c=>c.aprobado=false);

function requisitosOK(c){
  return !c.prereq || c.prereq.every(p => cursos[p] && cursos[p].aprobado);
}

function actualizar(){
  Object.keys(cursos).forEach(id=>{
    const c=cursos[id], td=document.getElementById(id);
    if(!td) return;
    td.className="";
    td.innerHTML=`<div class=curso-nombre>${c.nombre}</div><div class=curso-sigla>${c.sig}</div>`;
    if(c.aprobado) td.classList.add("aprobado");
    else if(requisitosOK(c)) td.classList.add("desbloqueado");
    else td.classList.add("bloqueado");
  });
}

function toggle(id){
  const c=cursos[id];
  if(!requisitosOK(c)) return;
  c.aprobado=!c.aprobado;
  actualizar();
}

document.addEventListener("DOMContentLoaded",()=>{
  actualizar();
  Object.keys(cursos).forEach(id=>{
    const td=document.getElementById(id);
    if(td) td.addEventListener("click",()=>toggle(id));
  });
});
</script>

</body>
</html>
