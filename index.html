<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Malla Interactiva — Ciencia de Datos UC</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background: #f9f9f9;
    position: relative;
    overflow-x: hidden;
  }

  body::before {
    content: '';
    position: fixed;
    top: -150px;
    left: -150px;
    width: 1200px;
    height: 1200px;
    background: radial-gradient(circle at 20% 30%, #2EC4B6 0%, transparent 50%), 
                radial-gradient(circle at 80% 70%, #FF9EBB 0%, transparent 50%);
    z-index: -1;
    opacity: 0.2;
    transform: rotate(25deg);
  }

  h2.carrera {
    text-align: center;
    margin: 10px 0 0 0;
    font-size: 24px;
    color: #333;
  }

  h1 {
    text-align: center;
    margin: 5px 0 20px 0;
    font-size: 20px;
    color: #444;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    table-layout: fixed;
    margin-bottom: 20px;
  }

  th, td {
    border: 1px solid #666;
    padding: 15px 6px;
    text-align: center;
    vertical-align: middle;
    font-size: 13px;
    cursor: pointer;
    word-wrap: break-word;
    min-height: 80px;
  }

  th {
    background: #333;
    color: white;
    font-size: 14px;
  }

  td.bloqueado {
    background: #FF6A00;
    color: white;
    cursor: not-allowed;
    opacity: 0.8;
  }

  td.desbloqueado {
    background: #FF9EBB;
    font-weight: bold;
  }

  td.aprobado {
    background: #2EC4B6;
    color: white;
    font-weight: bold;
  }

  td.aprobado .curso-nombre,
  td.aprobado .curso-sigla {
    text-decoration: line-through;
  }

  td input {
    width: 90%;
    height: 35px;
    border: none;
    background: #fff7f7;
    text-align: center;
    font-size: 13px;
    border-radius: 4px;
    cursor: text;
  }

  td input:focus {
    outline: 2px solid #2EC4B6;
  }

  /* Input OFG ocupa todo el TD cuando aprobado */
  td.aprobado input {
    width: 100%;
    height: 100%;
    background-color: transparent;
    color: white;
    text-decoration: line-through;
    font-weight: bold;
  }

  .curso-nombre {
    font-size: 13px;
  }

  .curso-sigla {
    font-size: 11px;
    font-style: italic;
    opacity: 0.85;
  }

  .leyenda {
    width: 90%;
    max-width: 800px;
    margin: 30px auto;
    border: 1px solid #666;
    padding: 15px;
    background: #fff;
    border-radius: 5px;
    font-size: 14px;
  }

  .color-box {
    display: inline-block;
    width: 20px;
    height: 20px;
    margin-right: 8px;
    vertical-align: middle;
  }
</style>
</head>

<body>

<h2 class="carrera">Carrera: Ciencia de Datos – Universidad Católica</h2>
<h1>Malla Interactiva</h1>

<table>
  <tr>
    <th>1° Semestre</th><th>2° Semestre</th><th>3° Semestre</th><th>4° Semestre</th>
    <th>5° Semestre</th><th>6° Semestre</th><th>7° Semestre</th><th>8° Semestre</th>
  </tr>

  <tr>
    <td id="IC1103"></td><td id="IIC2233"></td><td id="IMT2220"></td><td id="EYP1025"></td>
    <td id="EYP2114"></td><td id="EYP2101"></td><td id="EYP2111"></td><td id="IMT2270"></td>
  </tr>
  <tr>
    <td id="MAT1107"></td><td id="MAT1610"></td><td id="IMT2230"></td><td id="IC2133"></td>
    <td id="IIC2613"></td><td id="EYP2301"></td><td id="EYP2801"></td><td></td>
  </tr>
  <tr>
    <td id="MAT1207"></td><td id="IMT2210"></td><td id="ETI195"></td><td id="IC2413"></td>
    <td id="LIC2440"></td><td id="C2026"></td><td id="IMT2260"></td><td></td>
  </tr>
  <tr>
    <td id="MAT0007"></td><td id="IMT2200"></td><td id="IIC1253"></td><td id="IMT2250"></td>
    <td id="OTRO"></td><td id="IIC2433"></td><td id="OPR_MINOR_7"></td><td id="OPR_MINOR_8"></td>
  </tr>

  <!-- OFG -->
  <tr>
    <td id="OFG1"><input type="text" placeholder="OFG"/></td>
    <td id="OFG2"><input type="text" placeholder="OFG"/></td>
    <td id="OFG3"><input type="text" placeholder="OFG"/></td>
    <td id="OFG4"><input type="text" placeholder="OFG"/></td>
    <td id="OFG5"><input type="text" placeholder="OFG"/></td>
    <td id="OFG6"><input type="text" placeholder="OFG"/></td>
    <td id="OFG7"><input type="text" placeholder="OFG"/></td>
    <td id="OFG8"><input type="text" placeholder="OFG"/></td>
  </tr>
</table>

<div class="leyenda">
  <p><span class="color-box" style="background:#2EC4B6;"></span> Aprobado (tachado)</p>
  <p><span class="color-box" style="background:#FF9EBB;"></span> Desbloqueado (puede aprobarse)</p>
  <p><span class="color-box" style="background:#FF6A00;"></span> Bloqueado (prerrequisitos no cumplidos)</p>
  <p>OFG: puedes escribir su nombre y luego doble clic para aprobar (cambia de color de fondo).</p>
</div>

<script>
// Cursos con prerrequisitos
const cursos = {
  IC1103:{nombre:"Introducción a la Programación",sigla:"IC1103",prereq:[]},
  MAT1107:{nombre:"Introducción al Cálculo",sigla:"MAT1107",prereq:[]},
  MAT1207:{nombre:"Introducción al Álgebra y Geometría",sigla:"MAT1207",prereq:[]},
  MAT0007:{nombre:"Taller Matemáticas p/ Estadística",sigla:"MAT0007",prereq:[]},

  IIC2233:{nombre:"Programación Avanzada",sigla:"IIC2233",prereq:["IC1103"]},
  MAT1610:{nombre:"Cálculo I",sigla:"MAT1610",prereq:["MAT1107"]},
  IMT2210:{nombre:"Álgebra Lineal CD",sigla:"IMT2210",prereq:["IC1103","MAT1107","MAT1207"]},
  IMT2200:{nombre:"Intro a Ciencia de Datos",sigla:"IMT2200",prereq:["IC1103","MAT1207"]},

  IMT2220:{nombre:"Cálculo p/ Ciencia Datos",sigla:"IMT2220",prereq:["MAT1610"],simultaneo:["IMT2210"]},
  IMT2230:{nombre:"Álgebra Lineal Avanzada",sigla:"IMT2230",prereq:["MAT1610","IMT2210"]},
  ETI195:{nombre:"Ética CD y Estadística",sigla:"ETI195",prereq:["IIC2233","IMT2200"]},
  IIC1253:{nombre:"Matemáticas Discretas",sigla:"IIC1253",prereq:["IMT2210"]},

  EYP1025:{nombre:"Modelos Probabilísticos",sigla:"EYP1025",prereq:["IMT2220","IMT2230"]},
  IC2133:{nombre:"Estructuras de Datos",sigla:"IC2133",prereq:["IIC2233","IIC1253"]},
  IC2413:{nombre:"Bases de Datos",sigla:"IC2413",prereq:["IIC2233"]},
  IMT2250:{nombre:"Optimización CD",sigla:"IMT2250",prereq:["IMT2220","IMT2210"]},

  EYP2114:{nombre:"Inferencia Estadística",sigla:"EYP2114",prereq:["EYP1025"]},
  IIC2613:{nombre:"Inteligencia Artificial",sigla:"IIC2613",prereq:["EYP1025","IIC2233"]},
  LIC2440:{nombre:"Procesamiento Datos Masivos",sigla:"LIC2440",prereq:["IC2413","IC2133"]},
  OTRO:{nombre:"Optativo/MINOR",sigla:"OPR",prereq:[]},

  EYP2101:{nombre:"Procesos Estocásticos Aplicados",sigla:"EYP2101",prereq:["EYP2114"]},
  EYP2301:{nombre:"Análisis de Regresión",sigla:"EYP2301",prereq:["EYP2114"]},
  C2026:{nombre:"Visualización Información",sigla:"C2026",prereq:["IC1103"]},
  IIC2433:{nombre:"Minería de Datos",sigla:"IIC2433",prereq:["IC1103","EYP1025","IMT2210"]},

  EYP2111:{nombre:"Simulación",sigla:"EYP2111",prereq:["EYP2101"]},
  EYP2801:{nombre:"Métodos Bayesianos",sigla:"EYP2801",prereq:["EYP2114"]},
  IMT2260:{nombre:"Teoría Aprendizaje Automático",sigla:"IMT2260",prereq:["EYP2114","LIC2440","IMT2250"]},
  OPR_MINOR_7:{nombre:"Optativo/MINOR",sigla:"OPR_MINOR_7",prereq:[]},

  IMT2270:{nombre:"Proyecto de Graduación",sigla:"IMT2270",prereq:["EYP2801","IMT2260","IMT2250","ETI195"]},
  OPR_MINOR_8:{nombre:"Optativo/MINOR",sigla:"OPR_MINOR_8",prereq:[]},

  OFG1:{nombre:"OFG",sigla:"OFG1",prereq:[]},
  OFG2:{nombre:"OFG",sigla:"OFG2",prereq:[]},
  OFG3:{nombre:"OFG",sigla:"OFG3",prereq:[]},
  OFG4:{nombre:"OFG",sigla:"OFG4",prereq:[]},
  OFG5:{nombre:"OFG",sigla:"OFG5",prereq:[]},
  OFG6:{nombre:"OFG",sigla:"OFG6",prereq:[]},
  OFG7:{nombre:"OFG",sigla:"OFG7",prereq:[]},
  OFG8:{nombre:"OFG",sigla:"OFG8",prereq:[]},
};

// Funciones
function estanPrerrequisitosAprobados(curso){
  if(!curso.prereq) return true;
  return curso.prereq.every(cod=>cursos[cod] && cursos[cod].aprobado);
}

function actualizarMalla(){
  Object.keys(cursos).forEach(cod=>{
    const c = cursos[cod];
    const td = document.getElementById(cod);
    if(!td) return;
    if(cod.startsWith("OFG")) return;
    td.innerHTML = `<div class="curso-nombre">${c.nombre}</div><div class="curso-sigla">${c.sigla}</div>`;
    td.className="";
    if(c.aprobado){
      td.classList.add("aprobado");
    } else if(estanPrerrequisitosAprobados(c)){
      td.classList.add("desbloqueado");
    } else {
      td.classList.add("bloqueado");
    }
  });
}

function toggleAprobado(cod){
  if(cod.startsWith("OFG")) return;
  const c = cursos[cod];
  if(!c) return;
  if(!estanPrerrequisitosAprobados(c)) return;
  c.aprobado = !c.aprobado;
  actualizarMalla();
}

// Aprobar OFG
function toggleOFG(event){
  const td = event.target.parentElement;
  td.classList.toggle("aprobado");
}

document.addEventListener("DOMContentLoaded",()=>{
  actualizarMalla();

  Object.keys(cursos).forEach(cod=>{
    const td = document.getElementById(cod);
    if(td){
      td.addEventListener("click",()=>toggleAprobado(cod));
    }
  });

  for(let i=1;i<=8;i++){
    const inputOFG = document.querySelector(`#OFG${i} input`);
    if(inputOFG){
      inputOFG.addEventListener("dblclick", toggleOFG);
    }
  }
});
</script>
</body>
</html>
