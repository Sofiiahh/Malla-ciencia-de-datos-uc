<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Malla Curricular Interactiva</title>

<style>
  body { font-family: Arial, sans-serif; background: #f7f7f7; }
  h1 { text-align: center; margin: 20px 0; }
  
  table {
    width: 100%;
    border-collapse: collapse;
    table-layout: fixed;
  }
  
  th, td {
    border: 1px solid #999;
    padding: 6px;
    text-align: center;
    vertical-align: middle;
    cursor: pointer;
    word-wrap: break-word;
    min-width: 80px;
  }

  th {
    background-color: #444;
    color: #fff;
  }

  td div { line-height: 1.2; }

  /* ✅ SOLO 3 COLORES */
  .bloqueado {
    background-color: #cfcfcf;
    opacity: 0.6;
    cursor: not-allowed;
  }
  .desbloqueado {
    background-color: #cfe9ff;
    font-weight: bold;
  }
  .aprobado {
    background-color: #3eb96d;
    text-decoration: line-through;
    color: white;
  }

  input {
    width: 100%;
    border: none;
    background: transparent;
    text-align: center;
  }
  input:focus { outline: none; }
</style>
</head>
<body>

<h1>Malla Curricular Interactiva - Ciencia de Datos UC</h1>

<table>
  <tr>
    <th>1° Sem</th><th>2° Sem</th><th>3° Sem</th><th>4° Sem</th>
    <th>5° Sem</th><th>6° Sem</th><th>7° Sem</th><th>8° Sem</th>
  </tr>
  
  <!-- FILA 1 -->
  <tr>
    <td id="IC1103"></td>
    <td id="IIC2233"></td>
    <td id="IMT2220"></td>
    <td id="EYP1025"></td>
    <td id="EYP2114"></td>
    <td id="EYP2101"></td>
    <td id="EYP2111"></td>
    <td id="IMT2270"></td>
  </tr>

  <!-- FILA 2 -->
  <tr>
    <td id="MAT1107"></td>
    <td id="MAT1610"></td>
    <td id="IMT2230"></td>
    <td id="IC2133"></td>
    <td id="IIC2613"></td>
    <td id="EYP2301"></td>
    <td id="EYP2801"></td>
    <td></td>
  </tr>

  <!-- FILA 3 -->
  <tr>
    <td id="MAT1207"></td>
    <td id="IMT2210"></td>
    <td id="ETI195"></td>
    <td id="IC2413"></td>
    <td id="LIC2440"></td>
    <td id="C2026"></td>
    <td id="IMT2260"></td>
    <td></td>
  </tr>

  <!-- FILA 4 -->
  <tr>
    <td id="MAT0007"></td>
    <td id="IMT2200"></td>
    <td id="IIC1253"></td>
    <td id="IMT2250"></td>
    <td id="EXTRA5"></td>
    <td id="IIC2433"></td>
    <td id="EXTRA7"></td>
    <td id="EXTRA8"></td>
  </tr>

  <!-- FILA OFG -->
  <tr>
    <td id="OFG1"></td>
    <td id="OFG2"></td>
    <td id="OFG3"></td>
    <td id="OFG4"></td>
    <td id="OFG5"></td>
    <td id="OFG6"></td>
    <td id="OFG7"></td>
    <td id="OFG8"></td>
  </tr>
</table>

<script>
// ✅ Cursos con prerrequisitos reales
const cursos = {
  "IC1103": { nombre:"Introducción a la Programación", prereq:[] },
  "MAT1107": { nombre:"Introducción al Cálculo", prereq:[] },
  "MAT1207": { nombre:"Álgebra y Geometría", prereq:[] },
  "MAT0007": { nombre:"Taller de Matemáticas", prereq:[] },

  "IIC2233": { nombre:"Programación Avanzada", prereq:["IC1103"] },
  "MAT1610": { nombre:"Cálculo I", prereq:["MAT1107"] },
  "IMT2210": { nombre:"Álgebra Lineal CD", prereq:["MAT1207"] },
  "IMT2200": { nombre:"Intro Ciencia de Datos", prereq:["IC1103"] },

  "IMT2220": { nombre:"Cálculo CD", prereq:["MAT1610"] },
  "IMT2230": { nombre:"Álgebra Avanzada Model.", prereq:["IMT2210"] },
  "ETI195": { nombre:"Ética CD", prereq:["IIC2233"] },
  "IIC1253": { nombre:"Matemáticas Discretas", prereq:["IC1103"] },

  "EYP1025": { nombre:"Modelos Probabilísticos", prereq:["IMT2220"] },
  "IC2133": { nombre:"EDA", prereq:["IIC2233"] },
  "IC2413": { nombre:"Bases de Datos", prereq:["IIC2233"] },
  "IMT2250": { nombre:"Optimización CD", prereq:["IMT2230"] },

  "EYP2114": { nombre:"Inferencia Estadística", prereq:["EYP1025"] },
  "IIC2613": { nombre:"Inteligencia Artificial", prereq:["IC2413"] },
  "LIC2440": { nombre:"Big Data", prereq:["IC2413"] },
  "EYP2101": { nombre:"Procesos Estoc.", prereq:["EYP2114"] },
  "EYP2301": { nombre:"Regresión", prereq:["EYP2114"] },

  "C2026": { nombre:"Visualización", prereq:["IC2413"] },
  "IIC2433": { nombre:"Minería de Datos", prereq:["IC2413"] },
  "IMT2260": { nombre:"Machine Learning", prereq:["IMT2250"] },

  "EYP2111": { nombre:"Simulación", prereq:["EYP2101"] },
  "EYP2801": { nombre:"Bayes", prereq:["EYP2101"] },

  "IMT2270": { nombre:"Proyecto de Grado", prereq:["IMT2260","EYP2801","ETI195"] }
};

// ✅ Agregar OFG sin prerrequisitos pero clickeables
for (let i=1; i<=8; i++){
  cursos[`OFG${i}`] = { nombre: `OFG ${i}`, prereq:[] };
}

function prerrequisitosOk(c){
  return cursos[c].prereq.every(p=>cursos[p].aprobado);
}

function actualizar(){
  for(const c in cursos){
    const celda = document.getElementById(c);
    if(!celda) continue;

    celda.innerHTML = `<div>${cursos[c].nombre}</div><div>${c}</div>`;
    celda.className = "";

    if(cursos[c].aprobado){
      celda.classList.add("aprobado");
    }
    else if(prerrequisitosOk(c)){
      celda.classList.add("desbloqueado");
    }
    else{
      celda.classList.add("bloqueado");
    }
  }
}

function toggle(c){
  if(!prerrequisitosOk(c)) return;
  cursos[c].aprobado = !cursos[c].aprobado;
  actualizar();
}

document.addEventListener("DOMContentLoaded", ()=>{
  actualizar();
  for(const c in cursos){
    const celda = document.getElementById(c);
    if(celda){
      celda.addEventListener("click", ()=>toggle(c));
    }
  }
});
</script>

</body>
</html>
